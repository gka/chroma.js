/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */

!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.chroma=r()}(this,function(){"use strict";for(var n=function(t,r,n){return void 0===r&&(r=0),void 0===n&&(n=1),t<r?r:n<t?n:t},r={},t=0,e=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];t<e.length;t+=1){var o=e[t];r["[object "+o+"]"]=o.toLowerCase()}var a=function(t){return r[Object.prototype.toString.call(t)]||"object"},u=Math.PI,i={clip_rgb:function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var r=0;r<=3;r++)r<3?((t[r]<0||255<t[r])&&(t._clipped=!0),t[r]=n(t[r],0,255)):3===r&&(t[r]=n(t[r],0,1));return t},limit:n,type:a,unpack:function(r,t){return void 0===t&&(t=null),3<=r.length?Array.prototype.slice.call(r):"object"==a(r[0])&&t?t.split("").filter(function(t){return void 0!==r[0][t]}).map(function(t){return r[0][t]}):r[0]},last:function(t){if(t.length<2)return null;var r=t.length-1;return"string"==a(t[r])?t[r].toLowerCase():null},PI:u,TWOPI:2*u,PITHIRD:u/3,DEG2RAD:u/180,RAD2DEG:180/u},c={format:{},autodetect:[]},l=i.last,s=i.clip_rgb,h=i.type,p=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if("object"===h(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var n=l(t),e=!1;if(!n){e=!0,c.sorted||(c.autodetect=c.autodetect.sort(function(t,r){return r.p-t.p}),c.sorted=!0);for(var o=0,a=c.autodetect;o<a.length;o+=1){var u=a[o];if(n=u.test.apply(u,t))break}}if(!c.format[n])throw new Error("unknown format: "+t);var i=c.format[n].apply(null,e?t:t.slice(0,-1));this._rgb=s(i),3===this._rgb.length&&this._rgb.push(1)};p.prototype.toString=function(){return"function"==h(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var f=p,g=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(g.Color,[null].concat(t)))};g.Color=f,g.version="2.1.0";var v=g,d=i.unpack,b=i.last,y=function(t){return Math.round(100*t)/100},w=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=d(t,"hsla"),e=b(t)||"lsa";return n[0]=y(n[0]||0),n[1]=y(100*n[1])+"%",n[2]=y(100*n[2])+"%","hsla"===e||3<n.length&&n[3]<1?(n[3]=3<n.length?n[3]:1,e="hsla"):n.length=3,e+"("+n.join(",")+")"},m=i.unpack,_=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=(t=m(t,"rgba"))[0],e=t[1],o=t[2];n/=255,e/=255,o/=255;var a,u,i=Math.min(n,e,o),c=Math.max(n,e,o),l=(c+i)/2;return c===i?(a=0,u=Number.NaN):a=l<.5?(c-i)/(c+i):(c-i)/(2-c-i),n==c?u=(e-o)/(c-i):e==c?u=2+(o-n)/(c-i):o==c&&(u=4+(n-e)/(c-i)),(u*=60)<0&&(u+=360),3<t.length&&void 0!==t[3]?[u,a,l,t[3]]:[u,a,l]},k=i.unpack,M=i.last,x=Math.round,N=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=k(t,"rgba"),e=M(t)||"rgb";return"hsl"==e.substr(0,3)?w(_(n),e):(n[0]=x(n[0]),n[1]=x(n[1]),n[2]=x(n[2]),("rgba"===e||3<n.length&&n[3]<1)&&(n[3]=3<n.length?n[3]:1,e="rgba"),e+"("+n.slice(0,"rgb"===e?3:4).join(",")+")")},F=i.unpack,j=Math.round,E=function(){for(var t,r=[],n=arguments.length;n--;)r[n]=arguments[n];var e,o,a,u=(r=F(r,"hsl"))[0],i=r[1],c=r[2];if(0===i)e=o=a=255*c;else{var l=[0,0,0],s=[0,0,0],h=c<.5?c*(1+i):c+i-c*i,p=2*c-h,f=u/360;l[0]=f+1/3,l[1]=f,l[2]=f-1/3;for(var g=0;g<3;g++)l[g]<0&&(l[g]+=1),1<l[g]&&(l[g]-=1),6*l[g]<1?s[g]=p+6*(h-p)*l[g]:2*l[g]<1?s[g]=h:3*l[g]<2?s[g]=p+(h-p)*(2/3-l[g])*6:s[g]=p;e=(t=[j(255*s[0]),j(255*s[1]),j(255*s[2])])[0],o=t[1],a=t[2]}return 3<r.length?[e,o,a,r[3]]:[e,o,a,1]},A=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,D=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,$=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,C=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,I=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,O=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,R=Math.round,S=function(t){var r;if(r=(t=t.toLowerCase().trim()).match(A)){for(var n=r.slice(1,4),e=0;e<3;e++)n[e]=+n[e];return n[3]=1,n}if(r=t.match(D)){for(var o=r.slice(1,5),a=0;a<4;a++)o[a]=+o[a];return o}if(r=t.match($)){for(var u=r.slice(1,4),i=0;i<3;i++)u[i]=R(2.55*u[i]);return u[3]=1,u}if(r=t.match(C)){for(var c=r.slice(1,5),l=0;l<3;l++)c[l]=R(2.55*c[l]);return c[3]=+c[3],c}if(r=t.match(I)){var s=r.slice(1,4);s[1]*=.01,s[2]*=.01;var h=E(s);return h[3]=1,h}if(r=t.match(O)){var p=r.slice(1,4);p[1]*=.01,p[2]*=.01;var f=E(p);return f[3]=+r[4],f}};S.test=function(t){return A.test(t)||D.test(t)||$.test(t)||C.test(t)||I.test(t)||O.test(t)};var G=S,L=i.type;f.prototype.css=function(t){return N(this._rgb,t)},v.css=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(f,[null].concat(t,["css"])))},c.format.css=G,c.autodetect.push({p:5,test:function(t){for(var r=[],n=arguments.length-1;0<n--;)r[n]=arguments[n+1];if(!r.length&&"string"===L(t)&&G.test(t))return"css"}});var P=i.unpack,q=i.last,T=Math.round,B=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=P(t,"rgba"),e=n[0],o=n[1],a=n[2],u=n[3],i=q(t)||"auto";void 0===u&&(u=1),"auto"===i&&(i=u<1?"rgba":"rgb");var c="000000"+((e=T(e))<<16|(o=T(o))<<8|(a=T(a))).toString(16);c=c.substr(c.length-6);var l="0"+T(255*u).toString(16);switch(l=l.substr(l.length-2),i.toLowerCase()){case"rgba":return"#"+c+l;case"argb":return"#"+l+c;default:return"#"+c}},H=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,U=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,W=function(t){if(t.match(H)){4!==t.length&&7!==t.length||(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var r=parseInt(t,16);return[r>>16,r>>8&255,255&r,1]}if(t.match(U)){5!==t.length&&9!==t.length||(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var n=parseInt(t,16);return[n>>24&255,n>>16&255,n>>8&255,Math.round((255&n)/255*100)/100]}throw new Error("unknown hex color: "+t)},z=i.type;f.prototype.hex=function(t){return B(this._rgb,t)},v.hex=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(f,[null].concat(t,["hex"])))},c.format.hex=W,c.autodetect.push({p:4,test:function(t){for(var r=[],n=arguments.length-1;0<n--;)r[n]=arguments[n+1];if(!r.length&&"string"===z(t)&&0<=[3,4,5,6,7,8,9].indexOf(t.length))return"hex"}});var J=i.unpack,K=i.type,Q=Math.round;f.prototype.rgb=function(t){return void 0===t&&(t=!0),!1===t?this._rgb.slice(0,3):this._rgb.slice(0,3).map(Q)},f.prototype.rgba=function(n){return void 0===n&&(n=!0),this._rgb.slice(0,4).map(function(t,r){return r<3?!1===n?t:Q(t):t})},v.rgb=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(f,[null].concat(t,["rgb"])))},c.format.rgb=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=J(t,"rgba");return void 0===n[3]&&(n[3]=1),n},c.autodetect.push({p:3,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=J(t,"rgba"),"array"===K(t)&&(3===t.length||4===t.length&&"number"==K(t[3])&&0<=t[3]&&t[3]<=1))return"rgb"}});var V=18,X=.95047,Y=1,Z=1.08883,tt=.137931034,rt=.206896552,nt=.12841855,et=.008856452,ot=i.unpack,at=Math.pow,ut=function(t){return(t/=255)<=.04045?t/12.92:at((t+.055)/1.055,2.4)},it=function(t){return et<t?at(t,1/3):t/nt+tt},ct=function(t,r,n){return t=ut(t),r=ut(r),n=ut(n),[it((.4124564*t+.3575761*r+.1804375*n)/X),it((.2126729*t+.7151522*r+.072175*n)/Y),it((.0193339*t+.119192*r+.9503041*n)/Z)]},lt=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=ot(t,"rgb"),e=n[0],o=n[1],a=n[2],u=ct(e,o,a),i=u[0],c=u[1],l=116*c-16;return[l<0?0:l,500*(i-c),200*(c-u[2])]},st=i.unpack,ht=Math.pow,pt=function(t){return 255*(t<=.00304?12.92*t:1.055*ht(t,1/2.4)-.055)},ft=function(t){return rt<t?t*t*t:nt*(t-tt)},gt=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n,e,o,a=(t=st(t,"lab"))[0],u=t[1],i=t[2];return e=(a+16)/116,n=isNaN(u)?e:e+u/500,o=isNaN(i)?e:e-i/200,e=Y*ft(e),n=X*ft(n),o=Z*ft(o),[pt(3.2404542*n-1.5371385*e-.4985314*o),pt(-.969266*n+1.8760108*e+.041556*o),pt(.0556434*n-.2040259*e+1.0572252*o),3<t.length?t[3]:1]},vt=i.unpack,dt=i.type;f.prototype.lab=function(){return lt(this._rgb)},v.lab=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(f,[null].concat(t,["lab"])))},c.format.lab=gt,c.autodetect.push({p:2,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=vt(t,"lab"),"array"===dt(t)&&3===t.length)return"lab"}});var bt=i.type;f.prototype.alpha=function(t,r){return void 0===r&&(r=!1),void 0!==t&&"number"===bt(t)?r?(this._rgb[3]=t,this):new f([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},f.prototype.darken=function(t){void 0===t&&(t=1);var r=this.lab();return r[0]-=V*t,new f(r,"lab").alpha(this.alpha(),!0)},f.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},f.prototype.darker=f.prototype.darken,f.prototype.brighter=f.prototype.brighten;var yt=i.unpack,wt=i.RAD2DEG,mt=Math.sqrt,_t=Math.atan2,kt=Math.round,Mt=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=yt(t,"lab"),e=n[0],o=n[1],a=n[2],u=mt(o*o+a*a),i=(_t(a,o)*wt+360)%360;return 0===kt(1e4*u)&&(i=Number.NaN),[e,u,i]},xt=i.unpack,Nt=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=xt(t,"rgb"),e=n[0],o=n[1],a=n[2],u=lt(e,o,a),i=u[0],c=u[1],l=u[2];return Mt(i,c,l)},Ft=i.unpack,jt=i.DEG2RAD,Et=Math.sin,At=Math.cos,Dt=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=Ft(t,"lch"),e=n[0],o=n[1],a=n[2];return isNaN(a)&&(a=0),[e,At(a*=jt)*o,Et(a)*o]},$t=i.unpack,Ct=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=(t=$t(t,"lch"))[0],e=t[1],o=t[2],a=Dt(n,e,o),u=a[0],i=a[1],c=a[2],l=gt(u,i,c);return[l[0],l[1],l[2],3<t.length?t[3]:1]},It=i.unpack,Ot=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];var n=It(t,"hcl").reverse();return Ct.apply(void 0,n)},Rt=i.unpack,St=i.type;f.prototype.lch=function(){return Nt(this._rgb)},f.prototype.hcl=function(){return Nt(this._rgb).reverse()},v.lch=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(f,[null].concat(t,["lch"])))},v.hcl=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];return new(Function.prototype.bind.apply(f,[null].concat(t,["hcl"])))},c.format.lch=Ct,c.format.hcl=Ot,["lch","hcl"].forEach(function(n){return c.autodetect.push({p:2,test:function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];if(t=Rt(t,n),"array"===St(t)&&3===t.length)return n}})}),f.prototype.saturate=function(t){void 0===t&&(t=1);var r=this.lch();return r[1]+=V*t,r[1]<0&&(r[1]=0),new f(r,"lch").alpha(this.alpha(),!0)},f.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var Gt=i.type,Lt=Math.pow;f.prototype.luminance=function(o){if(void 0===o||"number"!==Gt(o))return Pt.apply(void 0,this._rgb.slice(0,3));if(0===o)return new f([0,0,0,this._rgb[3]],"rgb");if(1===o)return new f([255,255,255,this._rgb[3]],"rgb");var t=this.luminance(),a=20,u=function(t,r){var n=t.interpolate(r,.5,"rgb"),e=n.luminance();return Math.abs(o-e)<1e-7||!a--?n:o<e?u(t,n):u(n,r)},r=(o<t?u(new f([0,0,0]),this):u(this,new f([255,255,255]))).rgb();return new f(r.concat([this._rgb[3]]))};var Pt=function(t,r,n){return.2126*(t=qt(t))+.7152*(r=qt(r))+.0722*(n=qt(n))},qt=function(t){return(t/=255)<=.03928?t/12.92:Lt((t+.055)/1.055,2.4)};f.prototype.get=function(t){var r=t.split("."),n=r[0],e=r[1],o=this[n]();if(e){var a=n.indexOf(e);if(-1<a)return o[a];throw new Error("unknown channel "+e+" in mode "+n)}return o};var Tt={},Bt=i.type,Ht=function(t,r,n){void 0===n&&(n=.5);for(var e=[],o=arguments.length-3;0<o--;)e[o]=arguments[o+3];var a=e[0]||"lrgb";if(Tt[a]||e.length||(a=Object.keys(Tt)[0]),!Tt[a])throw new Error("interpolation mode "+a+" is not defined");return"object"!==Bt(t)&&(t=new f(t)),"object"!==Bt(r)&&(r=new f(r)),Tt[a](t,r,n).alpha(t.alpha()+n*(r.alpha()-t.alpha()))};f.prototype.mix=f.prototype.interpolate=function(t,r){void 0===r&&(r=.5);for(var n=[],e=arguments.length-2;0<e--;)n[e]=arguments[e+2];return Ht.apply(void 0,[this,t,r].concat(n))};var Ut=i.type;f.prototype.set=function(t,r,n){void 0===n&&(n=!1);var e=t.split("."),o=e[0],a=e[1],u=this[o]();if(a){var i=o.indexOf(a);if(-1<i){if("string"==Ut(r))switch(r.charAt(0)){case"+":case"-":u[i]+=+r;break;case"*":u[i]*=+r.substr(1);break;case"/":u[i]/=+r.substr(1);break;default:u[i]=+r}else{if("number"!==Ut(r))throw new Error("unsupported value for Color.set");u[i]=r}var c=new f(u,o);return n?(this._rgb=c._rgb,this):c}throw new Error("unknown channel "+a+" in mode "+o)}return u};var Wt=Math.sqrt,zt=Math.pow;Tt.lrgb=function(t,r,n){var e=t._rgb,o=e[0],a=e[1],u=e[2],i=r._rgb,c=i[0],l=i[1],s=i[2];return new f(Wt(zt(o,2)*(1-n)+zt(c,2)*n),Wt(zt(a,2)*(1-n)+zt(l,2)*n),Wt(zt(u,2)*(1-n)+zt(s,2)*n),"rgb")};return v.mix=v.interpolate=Ht,v.valid=function(){for(var t=[],r=arguments.length;r--;)t[r]=arguments[r];try{return new(Function.prototype.bind.apply(f,[null].concat(t))),!0}catch(t){return!1}},v});
